<!DOCTYPE html>
<html>
<head>
  <title>CCSF-dev</title>
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1" name="viewport">
  <script crossorigin src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
  <script src="https://olocdnsandbox.s3.amazonaws.com/web-client/checkout-web-client/2.5.0/checkout.js"></script>
  <script>
    $(document).ready(function(){
      let checkoutFrame;
​
      function postResponseToClient(data) {
        if (typeof window.ReactNativeWebView !== "undefined") {
          window.ReactNativeWebView.postMessage(JSON.stringify(data));
        } else {
          window.postMessage(JSON.stringify(data));
        }
      }
​
      setTimeout(() => {
        const brandAccessId = document.getElementById('brandAccessId').value;
        const basketId = document.getElementById('basketId').value;
        checkoutFrame = new Olo.CheckoutFrame({
          cardElement: "credit-card-info-div",
          cvvElement: "cvv-info-div",
        });
        checkoutFrame.initialize({
          brandAccessId: "WX9GUJ9L6T2wwj2mPw_OGB9HM9ThJNPL",
          basketGuid: "547a1fc8-695f-456c-a87d-dd0f83301ff8",
          // brandAccessId: brandAccessId,
          // basketGuid: basketId,
          styles: {
            cardNumber: "font-size: 16px; height: 40px;padding-top: 5px;border-top-width: 0px;border-right-width: 0px;border-bottom-width: 0px;border-left-width: 0px; width: 100%",
            cvv: "font-size: 14px; height: 50px;padding-top: 5px;border-top-width: 0px;border-right-width: 0px;border-bottom-width: 0px;border-left-width: 0px; width: 100%"
          },
        });
        checkoutFrame.on("focus", function (evt) {
          console.log(evt);
        });
​
        checkoutFrame.on("error", function (errors) {
          postResponseToClient({type: 'error', data: errors});
          errors.forEach(error => {
            alert(error.description)
            console.log(error.code);
            console.log(error.description);
          });
        });
​
        checkoutFrame.on("success", function (order) {
          console.log(order);
          alert('Success', order.id)
          postResponseToClient({type: 'success', data: order});
        });
​
        checkoutFrame.on('ready', function (evt) {
          console.log('ready', evt);
        });
​
        checkoutFrame.on('complete', function (evt) {
          console.log('complete', evt);
        });
      }, 3000)
​
      document.getElementById("submitButton").onclick = function() {
        const value  = document.getElementById('payload').value
        const jsonParse = JSON.parse(value);
        checkoutFrame.submit(jsonParse);
        return false;
      };
    });
  </script>
</head>
<!-- <style>
    #payload {
        display: none;
    }
    #basketId {
        display: none;
    }
    #brandAccessId {
        display: none;
    }
    #submitButton{
        display: none;
    }
</style> -->
<body>
<div style="display: contents">
  <p style="font-size: 14px">Card Number</p>
  <Grid>
    <div class="credit-card-info-div" style="height: 40px;"></div>
  </Grid>
</div>
<p style="font-size: 14px;">CVV</p>
<div class="cvv-info-div" style="height: 30px;"></div>
<div style="margin-top: 100px;">
  <button id="submitButton" type="button" title="Submit">Submit</button>
  <input id="payload" type="text">
  <input id="basketId" type="text">
  <input id="brandAccessId" type="text">
</div>
</body>
</html>